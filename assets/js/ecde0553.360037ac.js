"use strict";(self.webpackChunkoverture_documentation=self.webpackChunkoverture_documentation||[]).push([[4091],{4237:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>y,contentTitle:()=>x,default:()=>T,frontMatter:()=>v,metadata:()=>b,toc:()=>j});var t=n(74848),s=n(28453),i=n(52364),a=n(11470),o=n(19365),l=n(21122),c=n(86025);const d="---\r\nid: overture:transportation:example:geometric-scoping\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates: [[0, 0], [1, 1]]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 1\r\n  subtype: road\r\n  class: primary\r\n  speed_limits:\r\n    - between: [0, 0.15]\r\n      max_speed:\r\n        value: 100\r\n        unit: km/h\r\n    - between: [0.15, 1]\r\n      max_speed:\r\n        value: 60\r\n        unit: km/h\r\n",p='---\r\nid: overture:transportation:example:temporal-scoping\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - [-122.90019762265949, 49.20784664905824]\r\n    - [-122.9003738558948, 49.207833436710956]\r\n    - [-122.90052986564378, 49.207871186265805]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 2\r\n  subtype: road\r\n  class: unknown\r\n  access_restrictions:\r\n    - access_type: denied\r\n      when:\r\n        mode: [bus]\r\n        during: "Mo-Fr 15:00-18:00"\r\n',h="---\r\nid: overture:transportation:example:subjective-heading-scoping\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - [-1.3023158, 54.5579329]\r\n    - [-1.3020090, 54.5577898]\r\n    - [-1.3014511, 54.5575155]\r\n    - [-1.3009618, 54.5572737]\r\n    - [-1.3004518, 54.5570288]\r\n    - [-1.3003009, 54.5569580]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 2\r\n  subtype: road\r\n  class: primary\r\n  access_restrictions:\r\n    - access_type: denied\r\n      when: { heading: backward }\r\n    - access_type: allowed\r\n      when:\r\n        heading: backward\r\n        mode: [bus]\r\n",u="---\r\nid: overture:transportation:example:subjective-usage-purpose-scoping\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - [-123.12700676422021, 49.279826628301635]\r\n    - [-123.12680748254229, 49.27995121574301]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 1\r\n  subtype: road\r\n  class: tertiary\r\n  access_restrictions:\r\n    - access_type: denied\r\n    - access_type: allowed\r\n      when: { using: [as_customer, at_destination] }\r\n",g="---\r\nid: overture:transportation:example:subjective-status-scoping\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - [-123.12791513926058, 49.287502049554945]\r\n    - [-123.12795068403449, 49.287522915661725]\r\n    - [-123.12797769806272, 49.28756882106529]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 1\r\n  subtype: road\r\n  class: tertiary\r\n  access_restrictions:\r\n    - access_type: denied\r\n    - access_type: allowed\r\n      when: { recognized: [as_private] }\r\n",m="---\r\nid: overture:transportation:example:subjective-vehicle-attributes-scoping\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - [-123.12791513926058, 49.287502049554945]\r\n    - [-123.12795068403449, 49.287522915661725]\r\n    - [-123.12797769806272, 49.28756882106529]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 1\r\n  subtype: road\r\n  class: residential\r\n  access_restrictions:\r\n    - access_type: denied\r\n      when:\r\n        vehicle:\r\n          - dimension: weight\r\n            comparison: greater_than\r\n            value: 23\r\n            unit: 't'\r\n",f="---\r\nid: overture:transportation:example:lanes-absolute\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - [-123.13174398677468, 49.28492173297815]\r\n    - [-123.13015725772073, 49.283923094445726]\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 2\r\n  subtype: road\r\n  class: secondary\r\n  lanes:\r\n    - value:\r\n      - direction: backward\r\n      - direction: forward\r\n",v={title:"Scoping rules"},x=void 0,b={id:"schema/concepts/scoping-rules",title:"Scoping rules",description:"Scoped and rule-based properties",source:"@site/docs/schema/concepts/scoping-rules.mdx",sourceDirName:"schema/concepts",slug:"/schema/concepts/scoping-rules",permalink:"/schema/concepts/scoping-rules",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Scoping rules"},sidebar:"schema",previous:{title:"Names",permalink:"/schema/concepts/names"},next:{title:"Reference",permalink:"/schema/reference"}},y={},j=[{value:"Scoped and rule-based properties",id:"scoped-and-rule-based-properties",level:2},{value:"Scoped values and scoping properties",id:"scoped-values-and-scoping-properties",level:3},{value:"Geometric scoping (linear referencing)",id:"geometric-scoping-linear-referencing",level:4},{value:"Temporal scoping (opening hours)",id:"temporal-scoping-opening-hours",level:4},{value:"Subjective scoping",id:"subjective-scoping",level:4},{value:"Travel-mode scoping",id:"travel-mode-scoping",level:4},{value:"Heading",id:"heading",level:4},{value:"Purpose of use scoping",id:"purpose-of-use-scoping",level:4},{value:"Status scoping (membership in a recognized group)",id:"status-scoping-membership-in-a-recognized-group",level:4},{value:"Vehicle attributes scoping",id:"vehicle-attributes-scoping",level:4},{value:"Rules and rule-based properties",id:"rules-and-rule-based-properties",level:2},{value:"Absolute form",id:"absolute-form",level:3},{value:"Rule evaluation algorithm",id:"rule-evaluation-algorithm",level:3}];function w(e){const r={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h2,{id:"scoped-and-rule-based-properties",children:"Scoped and rule-based properties"}),"\n",(0,t.jsx)(r.p,{children:"In the real world, many facts and rules affecting entities have\r\nonly a partial application, meaning they don't apply everywhere, or\r\nthey don't apply at all times, or to everyone, or to all sets of\r\nexternal conditions. For example, access restrictions on a road segment\r\nmight not apply to all people or all kinds of vehicles, or they might\r\nvary according to the day of the week. "}),"\n",(0,t.jsx)(r.p,{children:"The Overture schema uses two related concepts to capture the partial application of facts and rules: scoped values and rule-based properties."}),"\n",(0,t.jsx)(r.h3,{id:"scoped-values-and-scoping-properties",children:"Scoped values and scoping properties"}),"\n",(0,t.jsxs)(r.p,{children:["A ",(0,t.jsx)(r.em,{children:"scoped"})," value is a value which only applies within a limited scope.\r\nMost scoped values are rules in the rule lists of\r\n",(0,t.jsx)(r.a,{href:"#rules-and-rule-based-properties",children:"rule-based properties"}),". However,\r\nscoped values also exist outside of rule-based properties. For\r\nexample, a signpost property belonging to a road segment might be\r\ngeometrically scoped to its position along the road."]}),"\n",(0,t.jsxs)(r.p,{children:["The scope in which a scoped value applies is controlled by one or more\r\nspecial child properties of the value known as ",(0,t.jsx)(r.em,{children:"scoping"})," properties."]}),"\n",(0,t.jsx)(r.h4,{id:"geometric-scoping-linear-referencing",children:"Geometric scoping (linear referencing)"}),"\n",(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(o.default,{value:"description",label:"Description",default:!0,children:[(0,t.jsxs)(r.p,{children:["The geometric scoping properties ",(0,t.jsx)(r.code,{children:"at"})," and ",(0,t.jsx)(r.code,{children:"between"})," limit the scope of their parent value to a position or range of positions, respectively, along a segment's geometry. When the parent value is a rule object, the rule only matches the position or range of positions specified in the ",(0,t.jsx)(r.code,{children:"at"})," or ",(0,t.jsx)(r.code,{children:"between"})," property."]}),(0,t.jsxs)(r.p,{children:["The value of the ",(0,t.jsx)(r.code,{children:"at"})," property is a single real number ",(0,t.jsx)(r.code,{children:"a"})," where ",(0,t.jsx)(r.code,{children:"0"})," \u2264 ",(0,t.jsx)(r.code,{children:"a"}),"\r\n\u2264 ",(0,t.jsx)(r.code,{children:"1"}),". It represents a discrete position along the segment's geometry. The\r\nvalue of the ",(0,t.jsx)(r.code,{children:"between"})," property is a pair of numbers ",(0,t.jsx)(r.code,{children:"[a, b]"})," where ",(0,t.jsx)(r.code,{children:"0"})," \u2264\r\n",(0,t.jsx)(r.code,{children:"a"})," < ",(0,t.jsx)(r.code,{children:"b"})," \u2264 ",(0,t.jsx)(r.code,{children:"1"}),". It represents a range of positions along the segment's\r\ngeometry. The numbers ",(0,t.jsx)(r.code,{children:"a"})," and ",(0,t.jsx)(r.code,{children:"b"})," are interpreted as percentage displacements\r\nalong the parent segment's geometry starting from the start of the segment.\r\n(",(0,t.jsxs)(r.em,{children:['The terms "start" and "end" are explained in\r\n',(0,t.jsx)(r.a,{href:"https://docs.overturemaps.org/guides/transportation/shape-connectivity",children:"Shape and connectivity"}),"."]}),")"]}),(0,t.jsxs)(r.p,{children:["So, for example, the scoping property ",(0,t.jsx)(r.code,{children:'"at": 0.15'})," scopes its parent value\r\nto the position on the segment that is displaced 15% of the segment length from\r\nthe start."]}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsxs)("figure",{children:[(0,t.jsx)(l.A,{alt:"Diagram showing a single geometrically-scoped position",sources:{light:(0,c.Ay)("/img/transportation/geometric-scoping-position-light.svg"),dark:(0,c.Ay)("/img/transportation/geometric-scoping-position-dark.svg")}}),(0,t.jsx)("figcaption",{children:(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(r.p,{children:(0,t.jsxs)(r.em,{children:["The position along the segment geometry described by ",(0,t.jsx)(r.code,{children:'"at": 0.15'}),"."]})})})})]})}),(0,t.jsxs)(r.p,{children:["The scoping property ",(0,t.jsx)(r.code,{children:'"between": [0.35, 0.75]'})," scopes its parent value to the\r\nrange of positions on the segment beginning at 35% and extending to 75% of the\r\nsegment length from the start."]}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsxs)("figure",{children:[(0,t.jsx)(l.A,{alt:"Diagram showing a geometrically-scoped range",sources:{light:(0,c.Ay)("/img/transportation/geometric-scoping-range-light.svg"),dark:(0,c.Ay)("/img/transportation/geometric-scoping-range-dark.svg")}}),(0,t.jsx)("figcaption",{children:(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(r.p,{children:(0,t.jsxs)(r.em,{children:["The range on the segment geometry described by ",(0,t.jsx)(r.code,{children:'"between": [0.35, 0.75]'}),"."]})})})})]})})]}),(0,t.jsxs)(o.default,{value:"example",label:"Example",default:!0,children:[(0,t.jsx)(r.p,{children:"The example below shows a road segment whose speed limit is defined by\r\ntwo geometrically-scoped speed limit rules:"}),(0,t.jsx)(i.default,{language:"yaml",children:d})]})]}),"\n",(0,t.jsx)(r.h4,{id:"temporal-scoping-opening-hours",children:"Temporal scoping (opening hours)"}),"\n",(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(o.default,{value:"description",label:"Description",default:!0,children:[(0,t.jsxs)(r.p,{children:["The temporal, or time-based, scoping construct ",(0,t.jsx)(r.code,{children:'when: { during: "..." }'})," limits\r\nthe scope of its parent value to one or more recurring time ranges. When the\r\nparent value is a rule object, the rule only matches the time range or time\r\nranges specified in the ",(0,t.jsx)(r.code,{children:"during"})," property."]}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"during"})," property must contain a string expressed in the OpenStreetMap\r\n",(0,t.jsx)(r.a,{href:"https://wiki.openstreetmap.org/wiki/Key:opening_hours/specification",children:"opening hours specification"}),"."]})]}),(0,t.jsxs)(o.default,{value:"example",label:"Example",default:!0,children:[(0,t.jsx)(r.p,{children:"The example below shows a road segment with a temporally-scoped access\r\nrestriction rule. The rule states that non-bus travellers are prohibited\r\nfrom access to the segment on weekdays between 3PM and 6PM."}),(0,t.jsx)(i.default,{language:"yaml",children:p})]})]}),"\n",(0,t.jsx)(r.h4,{id:"subjective-scoping",children:"Subjective scoping"}),"\n",(0,t.jsxs)(r.p,{children:["Subjective scoping means that the scope of a property can be constrained based\r\non subjective factors like ",(0,t.jsx)(r.em,{children:"who"})," or ",(0,t.jsx)(r.em,{children:"what"})," is travelling on the transportation\r\nnetwork, or ",(0,t.jsx)(r.em,{children:"how"})," they are doing it."]}),"\n",(0,t.jsx)(r.p,{children:"The Overture transportation schema supports the following subjective factors:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#travel-mode-scoping",children:"Travel mode"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#heading",children:"Heading"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#purpose-of-use-scoping",children:"Purpose of use"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#status-scoping-membership-in-a-recognized-group",children:"Status or membership in a recognized group"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#vehicle-attributes-scoping",children:"Vehicle attributes"})}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"The sub-headings below explain each of these subjective factors in greater\r\ndetail."}),"\n",(0,t.jsx)(r.h4,{id:"travel-mode-scoping",children:"Travel-mode scoping"}),"\n",(0,t.jsx)(r.p,{children:"A travel mode is a way of moving about the transportation network, for\r\nexample driving in a motor vehicle, or, more specifically, driving in a\r\nhigh-occupancy vehicle."}),"\n",(0,t.jsxs)(r.p,{children:["The property construct ",(0,t.jsx)(r.code,{children:"when: { mode: [...] }"})," limits the scope its\r\nparent value to apply only to people or things travelling using the\r\nlisted travel modes."]}),"\n",(0,t.jsxs)(r.p,{children:["To dive deeper into this topic, see the page on ",(0,t.jsx)(r.a,{href:"https://docs.overturemaps.org/guides/transportation/travel-modes",children:"travel modes"}),"."]}),"\n",(0,t.jsx)(r.h4,{id:"heading",children:"Heading"}),"\n",(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(o.default,{value:"description",label:"Description",default:!0,children:[(0,t.jsxs)(r.p,{children:["Heading scoping limits the the scope of a parent value to apply only\r\nwhen the traveller is proceeding along the segment geometry in the named\r\ndirection, either ",(0,t.jsx)(r.code,{children:"forward"})," or ",(0,t.jsx)(r.code,{children:"backward"}),". (",(0,t.jsxs)(r.em,{children:["The directions ",(0,t.jsx)(r.code,{children:"forward"}),"\r\nand ",(0,t.jsx)(r.code,{children:"backward"})," are defined on the ",(0,t.jsx)(r.a,{href:"https://docs.overturemaps.org/guides/transportation/shape-connectivity",children:"shape and connectivity"})," page."]}),")"]}),(0,t.jsxs)(r.p,{children:["The property construct ",(0,t.jsx)(r.code,{children:"when: { heading: forward|backward }"})," applies\r\nheading scoping to a parent value."]})]}),(0,t.jsxs)(o.default,{value:"example",label:"Example",default:!0,children:[(0,t.jsx)(r.p,{children:"The example below shows a road segment with multiple heading-scoped\r\naccess restriction rules. The rules allow all standard travel modes for\r\nthe segment class to travel in the forward direction, but only allow\r\nbuses to travel in the backward direction."}),(0,t.jsx)(i.default,{language:"yaml",children:h})]})]}),"\n",(0,t.jsx)(r.h4,{id:"purpose-of-use-scoping",children:"Purpose of use scoping"}),"\n",(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(o.default,{value:"description",label:"Description",default:!0,children:[(0,t.jsx)(r.p,{children:"Usage purpose scoping limits the scope of a parent value to apply only\r\nwhen the user is using the feature for one of the listed purposes. This\r\ntype of scoping is common when it matters that a person is in the\r\nprocess of doing something like making a delivery or acting as the\r\ncustomer of a business."}),(0,t.jsxs)(r.p,{children:["The property construct ",(0,t.jsx)(r.code,{children:"when: { using: [...] }"})," applies usage purpose\r\nscoping to a parent value."]})]}),(0,t.jsxs)(o.default,{value:"example",label:"Example",default:!0,children:[(0,t.jsx)(r.p,{children:"The example below shows a road segment representing a hotel driveway\r\nwhere through traffic is not permitted (only usage by hotel customers\r\nor as a final destination is allowed):"}),(0,t.jsx)(i.default,{language:"yaml",children:u})]})]}),"\n",(0,t.jsx)(r.h4,{id:"status-scoping-membership-in-a-recognized-group",children:"Status scoping (membership in a recognized group)"}),"\n",(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(o.default,{value:"description",label:"Description",default:!0,children:[(0,t.jsx)(r.p,{children:"Status scoping limits the scope of a parent value to apply only when the\r\nuser has a certain recognized status or is a member of a recognized\r\ngroup. This type of scoping is useful when it matters whether a person\r\nor thing has a recognized characteristic, such as holding a permit or\r\nbeing an employee of a business or student at an academic institution."}),(0,t.jsxs)(r.p,{children:["The property construct ",(0,t.jsx)(r.code,{children:"when: { recognized: [...] }"})," applies status\r\nscoping to a parent value."]})]}),(0,t.jsxs)(o.default,{value:"example",label:"Example",default:!0,children:[(0,t.jsx)(r.p,{children:"The example below shows a road segment modeling a private condominium\r\ntower driveway where access is denied to the general public, but allowed\r\nto privately-authorized individuals, such as condo unit owners:"}),(0,t.jsx)(i.default,{language:"yaml",children:g})]})]}),"\n",(0,t.jsx)(r.h4,{id:"vehicle-attributes-scoping",children:"Vehicle attributes scoping"}),"\n",(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(o.default,{value:"description",label:"Description",default:!0,children:[(0,t.jsx)(r.p,{children:"Vehicle attribute scoping limits the scope of a parent value to apply\r\nonly when the vehicle in use meets certain criteria."}),(0,t.jsxs)(r.p,{children:["The property construct ",(0,t.jsx)(r.code,{children:"when: { vehicle: [{ dimension: ..., comparison: ..., value: ... }] }"})," applies vehicle\r\nattributes scoping to a parent value."]}),(0,t.jsxs)(r.p,{children:["Note that vehicle attribute scoping can overlap to some degree with\r\n",(0,t.jsx)(r.a,{href:"#travel-mode-scoping",children:"travel mode scoping"}),'. For example, some access\r\nrules may be scoped to the travel mode "heavy goods vehicle", while\r\nanother equivalent access rule could be scoped to the vehicle attribute\r\n"gross vehicle weight".']})]}),(0,t.jsx)(o.default,{value:"example",label:"Example",default:!0,children:(0,t.jsx)(i.default,{language:"yaml",children:m})})]}),"\n",(0,t.jsx)(r.h2,{id:"rules-and-rule-based-properties",children:"Rules and rule-based properties"}),"\n",(0,t.jsxs)(r.p,{children:["A ",(0,t.jsx)(r.em,{children:"rule-based"})," property is a property whose value in a given situation is\r\ndetermined by evaluating a list of rules against the facts applicable to that\r\nsituation. Each individual rule in the list of rules is itself a scoped value,\r\na scoped value, and the assessment of which rule applies to a given set of facts\r\nis done by the rule evaluation algorithm."]}),"\n",(0,t.jsx)(r.h3,{id:"absolute-form",children:"Absolute form"}),"\n",(0,t.jsx)(r.p,{children:"There are cases when specifying a property value using rules makes sense, and\r\ncases where doing so is unnecessarily complicated because the real-world entity\r\nbeing modeled has a single unchanging state which is the same in all fact\r\nsituations. In these cases, most rule-based properties support a simpler\r\nabsolute form without a list of rules."}),"\n",(0,t.jsxs)(r.p,{children:["Consider the following two examples of road segments. On the left is a section\r\nfrom a simple two-lane bidirectional city street in which there is always one\r\nlane of traffic flowing in each direction. On the right is a section from a\r\none-way city street in which two of the lanes are only available for driving at\r\ncertain times of the day, being reserved for parking at other times. In the\r\nexample on the left, the lane list is specified absolutely; while in the example\r\non the right, it is given as a list of ",(0,t.jsx)(r.a,{href:"#temporal-scoping-opening-hours",children:"temporally-scoped"}),"\r\nlane rules."]}),"\n",(0,t.jsx)("div",{style:{width:"49.5%",float:"left"},children:(0,t.jsxs)("figure",{children:[(0,t.jsx)(i.default,{language:"yaml",children:f}),(0,t.jsx)("figcaption",{children:(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.em,{children:"An absolute list of lanes."})})})})]})}),"\n",(0,t.jsx)("div",{style:{width:"49.5%",float:"right"},children:(0,t.jsxs)("figure",{children:[(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:'---\r\nid: overture:transportation:example:lanes-rule\r\ntype: Feature\r\ngeometry:\r\n  type: LineString\r\n  coordinates:\r\n    - - -123.12244656918179\r\n      - 49.280940587393815\r\n    - - -123.12562968007902\r\n      - 49.27884862879665\r\nproperties:\r\n  theme: transportation\r\n  type: segment\r\n  version: 0\r\n  update_time: "2023-06-16T15:57:00-06:00"\r\n  subtype: road\r\n  road:  # The `road` property is deprecated and will be removed in the 2024-07 release\r\n    lanes:\r\n      - value:\r\n          - direction: forward\r\n          - direction: forward\r\n      - during: Mo-Fr 15:00-18:00\r\n        value:\r\n          - direction: forward\r\n          - direction: forward\r\n          - direction: forward\r\n          - direction: forward\n'})}),(0,t.jsx)("figcaption",{children:(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.em,{children:"A list of lane rules."})})})})]})}),"\n",(0,t.jsx)("div",{style:{clear:"both"}}),"\n",(0,t.jsx)(r.h3,{id:"rule-evaluation-algorithm",children:"Rule evaluation algorithm"}),"\n",(0,t.jsx)(r.p,{children:"Given a rule-based property, the actual value of the property in a given fact\r\npattern is determined by a three-step process: first, all matching rules are\r\nidentified; second, the single determining rule is chosen if possible; lastly,\r\nif there is no applicable rule, an appropriate default value may be assumed."}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Matching rules."})," For a given rule and a given set of facts, the rule\r\n",(0,t.jsx)(r.em,{children:"matches"})," the facts if the scope of the rule contains all the facts, ",(0,t.jsx)(r.em,{children:"i.e."}),"\r\nthe facts fit within all of the scoping properties expressed in the rule. The\r\nmatching criteria for a rule can be thought of as the logical AND of all the\r\nscoping properties expressed in the rule."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Determining rule."})," For a given rule-based property and a given set of\r\nfacts, ",(0,t.jsx)(r.em,{children:"at most"})," one rule can ",(0,t.jsx)(r.em,{children:"determine"})," the property value. If only one\r\nrule matches, that rules determines the property value. If more than one rule\r\nmatches, the last matching rule in the list determines the value. (This is\r\nsimilar to how OpenStreetMap ",(0,t.jsx)(r.a,{href:"https://wiki.openstreetmap.org/wiki/Conditional_restrictions",children:"conditional restrictions"}),"\r\nevaluated.) Therefore it is important to write more general rules before more\r\nspecific ones in a rule list."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Fallback to default."})," If there are no matching rules, an appropriate\r\ndefault value may apply, depending on the property being evaluated."]}),"\n"]})]})}function T(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(w,{...e})}):w(e)}},19365:(e,r,n)=>{n.r(r),n.d(r,{default:()=>a});n(96540);var t=n(18215);const s={tabItem:"tabItem_Ymn6"};var i=n(74848);function a(e){let{children:r,hidden:n,className:a}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.A)(s.tabItem,a),hidden:n,children:r})}},11470:(e,r,n)=>{n.r(r),n.d(r,{default:()=>w});var t=n(96540),s=n(18215),i=n(23104),a=n(56347),o=n(205),l=n(57485),c=n(31682),d=n(70679);function p(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:r,children:n}=e;return(0,t.useMemo)((()=>{const e=r??function(e){return p(e).map((e=>{let{props:{value:r,label:n,attributes:t,default:s}}=e;return{value:r,label:n,attributes:t,default:s}}))}(n);return function(e){const r=(0,c.XI)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,n])}function u(e){let{value:r,tabValues:n}=e;return n.some((e=>e.value===r))}function g(e){let{queryString:r=!1,groupId:n}=e;const s=(0,a.W6)(),i=function(e){let{queryString:r=!1,groupId:n}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:r,groupId:n});return[(0,l.aZ)(i),(0,t.useCallback)((e=>{if(!i)return;const r=new URLSearchParams(s.location.search);r.set(i,e),s.replace({...s.location,search:r.toString()})}),[i,s])]}function m(e){const{defaultValue:r,queryString:n=!1,groupId:s}=e,i=h(e),[a,l]=(0,t.useState)((()=>function(e){let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!u({value:r,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:r,tabValues:i}))),[c,p]=g({queryString:n,groupId:s}),[m,f]=function(e){let{groupId:r}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(r),[s,i]=(0,d.Dv)(n);return[s,(0,t.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:s}),v=(()=>{const e=c??m;return u({value:e,tabValues:i})?e:null})();(0,o.A)((()=>{v&&l(v)}),[v]);return{selectedValue:a,selectValue:(0,t.useCallback)((e=>{if(!u({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),f(e)}),[p,f,i]),tabValues:i}}var f=n(92303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(74848);function b(e){let{className:r,block:n,selectedValue:t,selectValue:a,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const r=e.currentTarget,n=l.indexOf(r),s=o[n].value;s!==t&&(c(r),a(s))},p=e=>{let r=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;r=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;r=l[n]??l[l.length-1];break}}r?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},r),children:o.map((e=>{let{value:r,label:n,attributes:i}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===r?0:-1,"aria-selected":t===r,ref:e=>l.push(e),onKeyDown:p,onClick:d,...i,className:(0,s.A)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":t===r}),children:n??r},r)}))})}function y(e){let{lazy:r,children:n,selectedValue:i}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){const e=a.find((e=>e.props.value===i));return e?(0,t.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:a.map(((e,r)=>(0,t.cloneElement)(e,{key:r,hidden:e.props.value!==i})))})}function j(e){const r=m(e);return(0,x.jsxs)("div",{className:(0,s.A)("tabs-container",v.tabList),children:[(0,x.jsx)(b,{...r,...e}),(0,x.jsx)(y,{...r,...e})]})}function w(e){const r=(0,f.A)();return(0,x.jsx)(j,{...e,children:p(e.children)},String(r))}}}]);